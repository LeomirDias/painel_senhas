{"ast":null,"code":"var _jsxFileName = \"D:\\\\WorkspacesReis\\\\painel_senhas\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport logo from './logoReis.png';\nimport './App.css';\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [queue, setQueue] = useState([]);\n  const [currentPassword, setCurrentPassword] = useState(\"000\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const apiUrl = process.env.REACT_APP_API_URL;\n\n  // Buscar estado da fila\n  const fetchQueue = useCallback(async () => {\n    try {\n      const response = await axios.get(`${apiUrl}/status`);\n      const {\n        queue,\n        currentPassword\n      } = response.data;\n      setQueue(queue || []);\n      setCurrentPassword(currentPassword || \"000\");\n    } catch (error) {\n      console.error(\"Erro ao buscar o estado da fila:\", error);\n    }\n  }, [apiUrl]);\n\n  // Adicionar senha\n  const addPassword = useCallback(async type => {\n    try {\n      const response = await axios.post(`${apiUrl}/add-password`, {\n        type\n      });\n      if (response.status === 200) {\n        await fetchQueue();\n      }\n    } catch (error) {\n      console.error(\"Erro ao adicionar senha:\", error);\n    }\n  }, [apiUrl, fetchQueue]);\n\n  // Chamar a próxima senha\n  const callNextPassword = async () => {\n    try {\n      const response = await axios.get(`${apiUrl}/next`);\n      const data = response.data;\n      if (response.status === 200) {\n        setCurrentPassword(data.password);\n        setErrorMessage(null);\n        await fetchQueue();\n      } else {\n        setErrorMessage(data.error);\n        setTimeout(() => setErrorMessage(null), 5000);\n      }\n    } catch (error) {\n      setErrorMessage(\"Nenhuma senha disponível\");\n      setTimeout(() => setErrorMessage(null), 5000);\n    }\n  };\n\n  // Eventos de teclado\n  useEffect(() => {\n    const handleKeyPress = event => {\n      if (event.key === \"p\") {\n        addPassword(\"P\");\n      } else if (event.key === \"c\") {\n        addPassword(\"C\");\n      } else if (event.key === \"c\") {\n        callNextPassword();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyPress);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n    };\n  }, [addPassword, callNextPassword]);\n\n  // Atualizar filas no carregamento\n  useEffect(() => {\n    fetchQueue();\n  }, [fetchQueue]);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    id: \"sidebar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"container-senhas\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Logo Reis\",\n        id: \"sidebar__logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"container-current\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"label\",\n          children: \"SUA VEZ!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password\",\n          id: \"current-password\",\n          children: currentPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"bottom-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"PR\\xD3XIMAS SENHAS:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-containers\",\n        id: \"container-next\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bottom-label\",\n          children: \"PR\\xD3XIMA -\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bottom-password\",\n          children: queue.length > 0 ? queue[0] : \"000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        bottom: \"20px\",\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        background: \"red\",\n        color: \"white\",\n        padding: \"10px\",\n        borderRadius: \"5px\",\n        fontSize: \"16px\",\n        fontWeight: \"bold\"\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"sS7/S2vEIrI6taeH4rSoWJajAeg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","React","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","App","_s","queue","setQueue","currentPassword","setCurrentPassword","errorMessage","setErrorMessage","apiUrl","process","env","REACT_APP_API_URL","fetchQueue","response","get","data","error","console","addPassword","type","post","status","callNextPassword","password","setTimeout","handleKeyPress","event","key","window","addEventListener","removeEventListener","id","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","className","length","style","position","bottom","left","transform","background","color","padding","borderRadius","fontSize","fontWeight","_c","$RefreshReg$"],"sources":["D:/WorkspacesReis/painel_senhas/client/src/App.js"],"sourcesContent":["import logo from './logoReis.png';\nimport './App.css';\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\n\nfunction App() {\n    const [queue, setQueue] = useState([]);\n    const [currentPassword, setCurrentPassword] = useState(\"000\");\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const apiUrl = process.env.REACT_APP_API_URL;\n\n    // Buscar estado da fila\n    const fetchQueue = useCallback(async () => {\n        try {\n            const response = await axios.get(`${apiUrl}/status`);\n            const { queue, currentPassword } = response.data;\n\n            setQueue(queue || []);\n            setCurrentPassword(currentPassword || \"000\");\n        } catch (error) {\n            console.error(\"Erro ao buscar o estado da fila:\", error);\n        }\n    }, [apiUrl]);\n\n    // Adicionar senha\n    const addPassword = useCallback(async (type) => {\n        try {\n            const response = await axios.post(`${apiUrl}/add-password`, { type });\n\n            if (response.status === 200) {\n                await fetchQueue();\n            }\n        } catch (error) {\n            console.error(\"Erro ao adicionar senha:\", error);\n        }\n    }, [apiUrl, fetchQueue]);\n\n    // Chamar a próxima senha\n    const callNextPassword = async () => {\n        try {\n            const response = await axios.get(`${apiUrl}/next`);\n            const data = response.data;\n\n            if (response.status === 200) {\n                setCurrentPassword(data.password);\n                setErrorMessage(null);\n                await fetchQueue();\n            } else {\n                setErrorMessage(data.error);\n                setTimeout(() => setErrorMessage(null), 5000);\n            }\n        } catch (error) {\n            setErrorMessage(\"Nenhuma senha disponível\");\n            setTimeout(() => setErrorMessage(null), 5000);\n        }\n    };\n\n    // Eventos de teclado\n    useEffect(() => {\n        const handleKeyPress = (event) => {\n            if (event.key === \"p\") {\n                addPassword(\"P\");\n            } else if (event.key === \"c\") {\n                addPassword(\"C\");\n            } else if (event.key === \"c\") {\n                callNextPassword();\n            }\n        };\n\n        window.addEventListener(\"keydown\", handleKeyPress);\n        return () => {\n            window.removeEventListener(\"keydown\", handleKeyPress);\n        };\n    }, [addPassword, callNextPassword]);\n\n    // Atualizar filas no carregamento\n    useEffect(() => {\n        fetchQueue();\n    }, [fetchQueue]);\n\n    return (\n        <main id=\"sidebar\">\n            <div id=\"container-senhas\">\n                <img src={logo} alt=\"Logo Reis\" id='sidebar__logo' />\n                <div id=\"container-current\">\n                    <div className=\"label\">SUA VEZ!</div>\n                    <div className=\"password\" id=\"current-password\">{currentPassword}</div>\n                </div>\n            </div>\n\n            <div id=\"bottom-section\">\n                <h1>PRÓXIMAS SENHAS:</h1>\n                <div className=\"bottom-containers\" id=\"container-next\">\n                    <div className=\"bottom-label\">PRÓXIMA -</div>\n                    <div className=\"bottom-password\">{queue.length > 0 ? queue[0] : \"000\"}</div>\n                </div>\n            </div>\n\n            {errorMessage && (\n                <div style={{\n                    position: \"fixed\",\n                    bottom: \"20px\",\n                    left: \"50%\",\n                    transform: \"translateX(-50%)\",\n                    background: \"red\",\n                    color: \"white\",\n                    padding: \"10px\",\n                    borderRadius: \"5px\",\n                    fontSize: \"16px\",\n                    fontWeight: \"bold\"\n                }}>\n                    {errorMessage}\n                </div>\n            )}\n        </main>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}